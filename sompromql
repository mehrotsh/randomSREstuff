sum by (daemonset, namespace) (
  kube_pod_container_resource_requests{resource="memory"} * on(pod, namespace)
  group_left(daemonset) 
  kube_pod_owner{owner_kind="DaemonSet"}
)

sum by (owner_name, namespace) (
  kube_pod_container_resource_requests{resource="memory"} * on(pod, namespace) 
  group_right 
  label_replace(
    kube_pod_owner{owner_kind="DaemonSet"},
    "pod", "$1", "pod", "(.+)"
  )
)


sum by (namespace, daemonset) (
  sum by (namespace, pod) (kube_pod_container_resource_requests{resource="memory"})
  * on (namespace, pod)
  group_left(daemonset)
  max by (namespace, pod, daemonset) (kube_pod_owner{owner_kind="DaemonSet"})
)
